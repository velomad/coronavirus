{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\sagar\\\\Desktop\\\\projects\\\\React projects\\\\coronavirus\\\\src\\\\components\\\\home\\\\minigraphs\\\\RecoveredMiniGraph.js\";\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport * as d3 from \"d3\";\nimport { connect } from \"react-redux\";\nimport { getLiveStatsAction } from \"../../../store/actions/statActions\";\n\nconst RecoveredMiniGraph = props => {\n  const [timeseries, setTimeseries] = useState([]);\n  const graphElement1 = useRef(null);\n  useEffect(() => {\n    if (props.timeseries.length > 1) {\n      setTimeseries(props.timeseries.slice(props.timeseries.length - 20));\n    }\n  }, [props.timeseries]);\n  const graphData = useCallback(timeseries => {\n    if (timeseries.length <= 1) return 0;\n    const data = timeseries;\n    const svg3 = d3.select(graphElement1.current);\n    const margin = {\n      top: 20,\n      right: 10,\n      bottom: 30,\n      left: 0\n    };\n    const width = 100 - margin.left - margin.right;\n    const height = 100 - margin.top - margin.bottom;\n    const x = d3.scaleTime().domain(d3.extent(data, function (d) {\n      return new Date(d[\"date\"] + \"2020\");\n    })).range([0, width]);\n    const y1 = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return +d[\"dailyconfirmed\"];\n    })]).range([height, 0]);\n    const path3 = svg3.append(\"path\").datum(data).attr(\"fill\", \"none\").attr(\"stroke\", \"#28a74599\").attr(\"stroke-width\", 2).attr(\"cursor\", \"pointer\").attr(\"d\", d3.line().x(function (d) {\n      return x(new Date(d[\"date\"] + \"2020\"));\n    }).y(function (d, i) {\n      if (i === 0) {\n        return y1(d[\"dailyrecovered\"]);\n      } else {\n        return y1(d[\"dailyrecovered\"]);\n      }\n    }).curve(d3.curveCardinal));\n    const totalLength3 = path3.node().getTotalLength();\n    path3.attr(\"stroke-dasharray\", totalLength3 + \" \" + totalLength3).attr(\"stroke-dashoffset\", totalLength3).transition().duration(props.animate ? 2000 : 0).attr(\"stroke-dashoffset\", 0);\n    svg3.selectAll(\".dot\").data(data.slice(data.length - 1)).enter().append(\"circle\").attr(\"fill\", \"#28a745\").attr(\"stroke\", \"#28a745\").attr(\"r\", 2).attr(\"cursor\", \"pointer\").attr(\"cx\", function (d) {\n      return x(new Date(d[\"date\"] + \"2020\"));\n    }).attr(\"cy\", function (d) {\n      return y1(d[\"dailyrecovered\"]);\n    }).on(\"mouseover\", d => {\n      d3.select(d3.event.target).attr(\"r\", \"5\");\n    }).on(\"mouseout\", d => {\n      d3.select(d3.event.target).attr(\"r\", \"2\");\n    }).style(\"opacity\", 0).transition().duration(props.animate ? 3000 : 0).style(\"opacity\", 1);\n  }, [props.animate]);\n  useEffect(() => {\n    graphData(timeseries);\n  }, [timeseries, graphData]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Minigraph\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"svg-parent fadeInUp\",\n    style: {\n      animationDelay: \"0.6s\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: graphElement1,\n    width: \"200\",\n    height: \"130\",\n    viewBox: \"0 0 100 70\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"svg-parent is-blue fadeInUp\",\n    style: {\n      animationDelay: \"0.7s\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst mapStateToProps = state => {\n  return {\n    timeseries: state.stats.timeSeries\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getLiveStats: () => dispatch(getLiveStatsAction())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RecoveredMiniGraph);","map":{"version":3,"sources":["D:/Users/sagar/Desktop/projects/React projects/coronavirus/src/components/home/minigraphs/RecoveredMiniGraph.js"],"names":["React","useState","useEffect","useRef","useCallback","d3","connect","getLiveStatsAction","RecoveredMiniGraph","props","timeseries","setTimeseries","graphElement1","length","slice","graphData","data","svg3","select","current","margin","top","right","bottom","left","width","height","x","scaleTime","domain","extent","d","Date","range","y1","scaleLinear","max","path3","append","datum","attr","line","y","i","curve","curveCardinal","totalLength3","node","getTotalLength","transition","duration","animate","selectAll","enter","on","event","target","style","animationDelay","mapStateToProps","state","stats","timeSeries","mapDispatchToProps","dispatch","getLiveStats"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,EAA6CC,WAA7C,QAAgE,OAAhE;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,oCAAnC;;AAGA,MAAMC,kBAAkB,GAAIC,KAAD,IAAW;AACpC,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BV,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAMW,aAAa,GAAGT,MAAM,CAAC,IAAD,CAA5B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIO,KAAK,CAACC,UAAN,CAAiBG,MAAjB,GAA0B,CAA9B,EAAiC;AAC/BF,MAAAA,aAAa,CAACF,KAAK,CAACC,UAAN,CAAiBI,KAAjB,CAAuBL,KAAK,CAACC,UAAN,CAAiBG,MAAjB,GAA0B,EAAjD,CAAD,CAAb;AACD;AACF,GAJQ,EAIN,CAACJ,KAAK,CAACC,UAAP,CAJM,CAAT;AAMA,QAAMK,SAAS,GAAGX,WAAW,CAC1BM,UAAD,IAAgB;AACd,QAAIA,UAAU,CAACG,MAAX,IAAqB,CAAzB,EAA4B,OAAO,CAAP;AAC5B,UAAMG,IAAI,GAAGN,UAAb;AACA,UAAMO,IAAI,GAAGZ,EAAE,CAACa,MAAH,CAAUN,aAAa,CAACO,OAAxB,CAAb;AACA,UAAMC,MAAM,GAAG;AAAEC,MAAAA,GAAG,EAAE,EAAP;AAAWC,MAAAA,KAAK,EAAE,EAAlB;AAAsBC,MAAAA,MAAM,EAAE,EAA9B;AAAkCC,MAAAA,IAAI,EAAE;AAAxC,KAAf;AACA,UAAMC,KAAK,GAAG,MAAML,MAAM,CAACI,IAAb,GAAoBJ,MAAM,CAACE,KAAzC;AACA,UAAMI,MAAM,GAAG,MAAMN,MAAM,CAACC,GAAb,GAAmBD,MAAM,CAACG,MAAzC;AAEA,UAAMI,CAAC,GAAGtB,EAAE,CACTuB,SADO,GAEPC,MAFO,CAGNxB,EAAE,CAACyB,MAAH,CAAUd,IAAV,EAAgB,UAAUe,CAAV,EAAa;AAC3B,aAAO,IAAIC,IAAJ,CAASD,CAAC,CAAC,MAAD,CAAD,GAAY,MAArB,CAAP;AACD,KAFD,CAHM,EAOPE,KAPO,CAOD,CAAC,CAAD,EAAIR,KAAJ,CAPC,CAAV;AASA,UAAMS,EAAE,GAAG7B,EAAE,CACV8B,WADQ,GAERN,MAFQ,CAED,CACN,CADM,EAENxB,EAAE,CAAC+B,GAAH,CAAOpB,IAAP,EAAa,UAAUe,CAAV,EAAa;AACxB,aAAO,CAACA,CAAC,CAAC,gBAAD,CAAT;AACD,KAFD,CAFM,CAFC,EAQRE,KARQ,CAQF,CAACP,MAAD,EAAS,CAAT,CARE,CAAX;AAUA,UAAMW,KAAK,GAAGpB,IAAI,CACfqB,MADW,CACJ,MADI,EAEXC,KAFW,CAELvB,IAFK,EAGXwB,IAHW,CAGN,MAHM,EAGE,MAHF,EAIXA,IAJW,CAIN,QAJM,EAII,WAJJ,EAKXA,IALW,CAKN,cALM,EAKU,CALV,EAMXA,IANW,CAMN,QANM,EAMI,SANJ,EAOXA,IAPW,CAQV,GARU,EASVnC,EAAE,CACCoC,IADH,GAEGd,CAFH,CAEK,UAAUI,CAAV,EAAa;AACd,aAAOJ,CAAC,CAAC,IAAIK,IAAJ,CAASD,CAAC,CAAC,MAAD,CAAD,GAAY,MAArB,CAAD,CAAR;AACD,KAJH,EAKGW,CALH,CAKK,UAAUX,CAAV,EAAaY,CAAb,EAAgB;AACjB,UAAIA,CAAC,KAAK,CAAV,EAAa;AACX,eAAOT,EAAE,CAACH,CAAC,CAAC,gBAAD,CAAF,CAAT;AACD,OAFD,MAEO;AACL,eAAOG,EAAE,CAACH,CAAC,CAAC,gBAAD,CAAF,CAAT;AACD;AACF,KAXH,EAYGa,KAZH,CAYSvC,EAAE,CAACwC,aAZZ,CATU,CAAd;AAwBA,UAAMC,YAAY,GAAGT,KAAK,CAACU,IAAN,GAAaC,cAAb,EAArB;AACAX,IAAAA,KAAK,CACFG,IADH,CACQ,kBADR,EAC4BM,YAAY,GAAG,GAAf,GAAqBA,YADjD,EAEGN,IAFH,CAEQ,mBAFR,EAE6BM,YAF7B,EAGGG,UAHH,GAIGC,QAJH,CAIYzC,KAAK,CAAC0C,OAAN,GAAgB,IAAhB,GAAuB,CAJnC,EAKGX,IALH,CAKQ,mBALR,EAK6B,CAL7B;AAOAvB,IAAAA,IAAI,CACDmC,SADH,CACa,MADb,EAEGpC,IAFH,CAEQA,IAAI,CAACF,KAAL,CAAWE,IAAI,CAACH,MAAL,GAAc,CAAzB,CAFR,EAGGwC,KAHH,GAIGf,MAJH,CAIU,QAJV,EAKGE,IALH,CAKQ,MALR,EAKgB,SALhB,EAMGA,IANH,CAMQ,QANR,EAMkB,SANlB,EAOGA,IAPH,CAOQ,GAPR,EAOa,CAPb,EAQGA,IARH,CAQQ,QARR,EAQkB,SARlB,EASGA,IATH,CASQ,IATR,EASc,UAAUT,CAAV,EAAa;AACvB,aAAOJ,CAAC,CAAC,IAAIK,IAAJ,CAASD,CAAC,CAAC,MAAD,CAAD,GAAY,MAArB,CAAD,CAAR;AACD,KAXH,EAYGS,IAZH,CAYQ,IAZR,EAYc,UAAUT,CAAV,EAAa;AACvB,aAAOG,EAAE,CAACH,CAAC,CAAC,gBAAD,CAAF,CAAT;AACD,KAdH,EAeGuB,EAfH,CAeM,WAfN,EAeoBvB,CAAD,IAAO;AACtB1B,MAAAA,EAAE,CAACa,MAAH,CAAUb,EAAE,CAACkD,KAAH,CAASC,MAAnB,EAA2BhB,IAA3B,CAAgC,GAAhC,EAAqC,GAArC;AACD,KAjBH,EAkBGc,EAlBH,CAkBM,UAlBN,EAkBmBvB,CAAD,IAAO;AACrB1B,MAAAA,EAAE,CAACa,MAAH,CAAUb,EAAE,CAACkD,KAAH,CAASC,MAAnB,EAA2BhB,IAA3B,CAAgC,GAAhC,EAAqC,GAArC;AACD,KApBH,EAqBGiB,KArBH,CAqBS,SArBT,EAqBoB,CArBpB,EAsBGR,UAtBH,GAuBGC,QAvBH,CAuBYzC,KAAK,CAAC0C,OAAN,GAAgB,IAAhB,GAAuB,CAvBnC,EAwBGM,KAxBH,CAwBS,SAxBT,EAwBoB,CAxBpB;AAyBD,GArF0B,EAsF3B,CAAChD,KAAK,CAAC0C,OAAP,CAtF2B,CAA7B;AAyFAjD,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,SAAS,CAACL,UAAD,CAAT;AACD,GAFQ,EAEN,CAACA,UAAD,EAAaK,SAAb,CAFM,CAAT;AAIA,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAqC,IAAA,KAAK,EAAE;AAAE2C,MAAAA,cAAc,EAAE;AAAlB,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,GAAG,EAAE9C,aADP;AAEE,IAAA,KAAK,EAAC,KAFR;AAGE,IAAA,MAAM,EAAC,KAHT;AAIE,IAAA,OAAO,EAAC,YAJV;AAKE,IAAA,mBAAmB,EAAC,eALtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAWE;AACE,IAAA,SAAS,EAAC,6BADZ;AAEE,IAAA,KAAK,EAAE;AAAE8C,MAAAA,cAAc,EAAE;AAAlB,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CADF;AAkBD,CAzHD;;AA2HA,MAAMC,eAAe,GAAIC,KAAD,IAAW;AAC/B,SAAO;AACLlD,IAAAA,UAAU,EAAEkD,KAAK,CAACC,KAAN,CAAYC;AADnB,GAAP;AAGD,CAJH;;AAME,MAAMC,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACLC,IAAAA,YAAY,EAAE,MAAMD,QAAQ,CAACzD,kBAAkB,EAAnB;AADvB,GAAP;AAGD,CAJD;;AAOF,eAAeD,OAAO,CAACqD,eAAD,EAAkBI,kBAAlB,CAAP,CAA6CvD,kBAA7C,CAAf","sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport { connect } from \"react-redux\";\r\nimport { getLiveStatsAction } from \"../../../store/actions/statActions\";\r\n\r\n\r\nconst RecoveredMiniGraph = (props) => {\r\n  const [timeseries, setTimeseries] = useState([]);\r\n  const graphElement1 = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (props.timeseries.length > 1) {\r\n      setTimeseries(props.timeseries.slice(props.timeseries.length - 20));\r\n    }\r\n  }, [props.timeseries]);\r\n\r\n  const graphData = useCallback(\r\n    (timeseries) => {\r\n      if (timeseries.length <= 1) return 0;\r\n      const data = timeseries;\r\n      const svg3 = d3.select(graphElement1.current);\r\n      const margin = { top: 20, right: 10, bottom: 30, left: 0 };\r\n      const width = 100 - margin.left - margin.right;\r\n      const height = 100 - margin.top - margin.bottom;\r\n\r\n      const x = d3\r\n        .scaleTime()\r\n        .domain(\r\n          d3.extent(data, function (d) {\r\n            return new Date(d[\"date\"] + \"2020\");\r\n          })\r\n        )\r\n        .range([0, width]);\r\n\r\n      const y1 = d3\r\n        .scaleLinear()\r\n        .domain([\r\n          0,\r\n          d3.max(data, function (d) {\r\n            return +d[\"dailyconfirmed\"];\r\n          }),\r\n        ])\r\n        .range([height, 0]);\r\n\r\n      const path3 = svg3\r\n        .append(\"path\")\r\n        .datum(data)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", \"#28a74599\")\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\r\n          \"d\",\r\n          d3\r\n            .line()\r\n            .x(function (d) {\r\n              return x(new Date(d[\"date\"] + \"2020\"));\r\n            })\r\n            .y(function (d, i) {\r\n              if (i === 0) {\r\n                return y1(d[\"dailyrecovered\"]);\r\n              } else {\r\n                return y1(d[\"dailyrecovered\"]);\r\n              }\r\n            })\r\n            .curve(d3.curveCardinal)\r\n        );\r\n\r\n      const totalLength3 = path3.node().getTotalLength();\r\n      path3\r\n        .attr(\"stroke-dasharray\", totalLength3 + \" \" + totalLength3)\r\n        .attr(\"stroke-dashoffset\", totalLength3)\r\n        .transition()\r\n        .duration(props.animate ? 2000 : 0)\r\n        .attr(\"stroke-dashoffset\", 0);\r\n\r\n      svg3\r\n        .selectAll(\".dot\")\r\n        .data(data.slice(data.length - 1))\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"fill\", \"#28a745\")\r\n        .attr(\"stroke\", \"#28a745\")\r\n        .attr(\"r\", 2)\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\"cx\", function (d) {\r\n          return x(new Date(d[\"date\"] + \"2020\"));\r\n        })\r\n        .attr(\"cy\", function (d) {\r\n          return y1(d[\"dailyrecovered\"]);\r\n        })\r\n        .on(\"mouseover\", (d) => {\r\n          d3.select(d3.event.target).attr(\"r\", \"5\");\r\n        })\r\n        .on(\"mouseout\", (d) => {\r\n          d3.select(d3.event.target).attr(\"r\", \"2\");\r\n        })\r\n        .style(\"opacity\", 0)\r\n        .transition()\r\n        .duration(props.animate ? 3000 : 0)\r\n        .style(\"opacity\", 1);\r\n    },\r\n    [props.animate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    graphData(timeseries);\r\n  }, [timeseries, graphData]);\r\n\r\n  return (\r\n    <div className=\"Minigraph\">\r\n      <div className=\"svg-parent fadeInUp\" style={{ animationDelay: \"0.6s\" }}>\r\n        <svg\r\n          ref={graphElement1}\r\n          width=\"200\"\r\n          height=\"130\"\r\n          viewBox=\"0 0 100 70\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-blue fadeInUp\"\r\n        style={{ animationDelay: \"0.7s\" }}\r\n      ></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      timeseries: state.stats.timeSeries,\r\n    };\r\n  };\r\n  \r\n  const mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      getLiveStats: () => dispatch(getLiveStatsAction()),\r\n    };\r\n  };\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RecoveredMiniGraph);"]},"metadata":{},"sourceType":"module"}