{"ast":null,"code":"import _slicedToArray from\"D:\\\\Users\\\\sagar\\\\Desktop\\\\projects\\\\React projects\\\\coronavirus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useCallback}from\"react\";import*as d3 from\"d3\";import{connect}from\"react-redux\";import{getLiveStatsAction}from\"../../../store/actions/statActions\";var RecoveredMiniGraph=function RecoveredMiniGraph(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),timeseries=_useState2[0],setTimeseries=_useState2[1];var graphElement1=useRef(null);useEffect(function(){if(props.timeseries.length>1){setTimeseries(props.timeseries.slice(props.timeseries.length-25));}},[props.timeseries]);var graphData=useCallback(function(timeseries){if(timeseries.length<=1)return 0;var data=timeseries;var svg3=d3.select(graphElement1.current);var margin={top:20,right:10,bottom:30,left:0};var width=100-margin.left-margin.right;var height=100-margin.top-margin.bottom;var x=d3.scaleTime().domain(d3.extent(data,function(d){return new Date(d[\"date\"]+\"2020\");})).range([0,width]);var y1=d3.scaleLinear().domain([0,d3.max(data,function(d){return+d[\"dailyconfirmed\"];})]).range([height,0]);var path3=svg3.append(\"path\").datum(data).attr(\"fill\",\"none\").attr(\"stroke\",\"#28a74599\").attr(\"stroke-width\",2).attr(\"cursor\",\"pointer\").attr(\"d\",d3.line().x(function(d){return x(new Date(d[\"date\"]+\"2020\"));}).y(function(d,i){if(i===0){return y1(d[\"dailyrecovered\"]);}else{return y1(d[\"dailyrecovered\"]);}}).curve(d3.curveCardinal));var totalLength3=path3.node().getTotalLength();path3.attr(\"stroke-dasharray\",totalLength3+\" \"+totalLength3).attr(\"stroke-dashoffset\",totalLength3).transition().duration(props.animate?2000:0).attr(\"stroke-dashoffset\",0);svg3.selectAll(\".dot\").data(data.slice(data.length-1)).enter().append(\"circle\").attr(\"fill\",\"#28a745\").attr(\"stroke\",\"#28a745\").attr(\"r\",2).attr(\"cursor\",\"pointer\").attr(\"cx\",function(d){return x(new Date(d[\"date\"]+\"2020\"));}).attr(\"cy\",function(d){return y1(d[\"dailyrecovered\"]);}).on(\"mouseover\",function(d){d3.select(d3.event.target).attr(\"r\",\"5\");}).on(\"mouseout\",function(d){d3.select(d3.event.target).attr(\"r\",\"2\");}).style(\"opacity\",0).transition().duration(props.animate?3000:0).style(\"opacity\",1);},[props.animate]);useEffect(function(){graphData(timeseries);},[timeseries,graphData]);return/*#__PURE__*/React.createElement(\"div\",{className:\"Minigraph\"},/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent fadeInUp\",style:{animationDelay:\"0.6s\"}},/*#__PURE__*/React.createElement(\"svg\",{ref:graphElement1,width:\"200\",height:\"130\",viewBox:\"0 0 100 70\",preserveAspectRatio:\"xMidYMid meet\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"svg-parent is-blue fadeInUp\",style:{animationDelay:\"0.7s\"}}));};var mapStateToProps=function mapStateToProps(state){return{timeseries:state.stats.timeSeries};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{getLiveStats:function getLiveStats(){return dispatch(getLiveStatsAction());}};};export default connect(mapStateToProps,mapDispatchToProps)(RecoveredMiniGraph);","map":{"version":3,"sources":["D:/Users/sagar/Desktop/projects/React projects/coronavirus/src/components/home/minigraphs/RecoveredMiniGraph.js"],"names":["React","useState","useEffect","useRef","useCallback","d3","connect","getLiveStatsAction","RecoveredMiniGraph","props","timeseries","setTimeseries","graphElement1","length","slice","graphData","data","svg3","select","current","margin","top","right","bottom","left","width","height","x","scaleTime","domain","extent","d","Date","range","y1","scaleLinear","max","path3","append","datum","attr","line","y","i","curve","curveCardinal","totalLength3","node","getTotalLength","transition","duration","animate","selectAll","enter","on","event","target","style","animationDelay","mapStateToProps","state","stats","timeSeries","mapDispatchToProps","dispatch","getLiveStats"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport { connect } from \"react-redux\";\r\nimport { getLiveStatsAction } from \"../../../store/actions/statActions\";\r\n\r\n\r\nconst RecoveredMiniGraph = (props) => {\r\n  const [timeseries, setTimeseries] = useState([]);\r\n  const graphElement1 = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (props.timeseries.length > 1) {\r\n      setTimeseries(props.timeseries.slice(props.timeseries.length - 25));\r\n    }\r\n  }, [props.timeseries]);\r\n\r\n  const graphData = useCallback(\r\n    (timeseries) => {\r\n      if (timeseries.length <= 1) return 0;\r\n      const data = timeseries;\r\n      const svg3 = d3.select(graphElement1.current);\r\n      const margin = { top: 20, right: 10, bottom: 30, left: 0 };\r\n      const width = 100 - margin.left - margin.right;\r\n      const height = 100 - margin.top - margin.bottom;\r\n\r\n      const x = d3\r\n        .scaleTime()\r\n        .domain(\r\n          d3.extent(data, function (d) {\r\n            return new Date(d[\"date\"] + \"2020\");\r\n          })\r\n        )\r\n        .range([0, width]);\r\n\r\n      const y1 = d3\r\n        .scaleLinear()\r\n        .domain([\r\n          0,\r\n          d3.max(data, function (d) {\r\n            return +d[\"dailyconfirmed\"];\r\n          }),\r\n        ])\r\n        .range([height, 0]);\r\n\r\n      const path3 = svg3\r\n        .append(\"path\")\r\n        .datum(data)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"stroke\", \"#28a74599\")\r\n        .attr(\"stroke-width\", 2)\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\r\n          \"d\",\r\n          d3\r\n            .line()\r\n            .x(function (d) {\r\n              return x(new Date(d[\"date\"] + \"2020\"));\r\n            })\r\n            .y(function (d, i) {\r\n              if (i === 0) {\r\n                return y1(d[\"dailyrecovered\"]);\r\n              } else {\r\n                return y1(d[\"dailyrecovered\"]);\r\n              }\r\n            })\r\n            .curve(d3.curveCardinal)\r\n        );\r\n\r\n      const totalLength3 = path3.node().getTotalLength();\r\n      path3\r\n        .attr(\"stroke-dasharray\", totalLength3 + \" \" + totalLength3)\r\n        .attr(\"stroke-dashoffset\", totalLength3)\r\n        .transition()\r\n        .duration(props.animate ? 2000 : 0)\r\n        .attr(\"stroke-dashoffset\", 0);\r\n\r\n      svg3\r\n        .selectAll(\".dot\")\r\n        .data(data.slice(data.length - 1))\r\n        .enter()\r\n        .append(\"circle\")\r\n        .attr(\"fill\", \"#28a745\")\r\n        .attr(\"stroke\", \"#28a745\")\r\n        .attr(\"r\", 2)\r\n        .attr(\"cursor\", \"pointer\")\r\n        .attr(\"cx\", function (d) {\r\n          return x(new Date(d[\"date\"] + \"2020\"));\r\n        })\r\n        .attr(\"cy\", function (d) {\r\n          return y1(d[\"dailyrecovered\"]);\r\n        })\r\n        .on(\"mouseover\", (d) => {\r\n          d3.select(d3.event.target).attr(\"r\", \"5\");\r\n        })\r\n        .on(\"mouseout\", (d) => {\r\n          d3.select(d3.event.target).attr(\"r\", \"2\");\r\n        })\r\n        .style(\"opacity\", 0)\r\n        .transition()\r\n        .duration(props.animate ? 3000 : 0)\r\n        .style(\"opacity\", 1);\r\n    },\r\n    [props.animate]\r\n  );\r\n\r\n  useEffect(() => {\r\n    graphData(timeseries);\r\n  }, [timeseries, graphData]);\r\n\r\n  return (\r\n    <div className=\"Minigraph\">\r\n      <div className=\"svg-parent fadeInUp\" style={{ animationDelay: \"0.6s\" }}>\r\n        <svg\r\n          ref={graphElement1}\r\n          width=\"200\"\r\n          height=\"130\"\r\n          viewBox=\"0 0 100 70\"\r\n          preserveAspectRatio=\"xMidYMid meet\"\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        className=\"svg-parent is-blue fadeInUp\"\r\n        style={{ animationDelay: \"0.7s\" }}\r\n      ></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      timeseries: state.stats.timeSeries,\r\n    };\r\n  };\r\n  \r\n  const mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      getLiveStats: () => dispatch(getLiveStatsAction()),\r\n    };\r\n  };\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RecoveredMiniGraph);"]},"metadata":{},"sourceType":"module"}